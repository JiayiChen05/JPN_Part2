<!-- My Bookings Page -->
<div class="page-header">
  <button onclick="loadPage('customer_dashboard.html')" class="btn btn-back">
    ‚Üê Back
  </button>
  <h2>My Bookings</h2>
  <p>View your event registrations and study room reservations</p>
</div>

<div class="bookings-container">
  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('events')">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Event Registrations
    </button>
    <button class="tab-btn" onclick="switchTab('rooms')">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Room Reservations
    </button>
  </div>

  <!-- Events Tab Content -->
  <div id="events-tab" class="tab-content active">
    <div class="filters">
      <div class="filter-group">
        <label for="event-status-filter">Status</label>
        <select id="event-status-filter" class="form-control">
          <option value="all">All Status</option>
          <option value="upcoming">Upcoming</option>
          <option value="completed">Completed</option>
          <option value="cancelled">Cancelled</option>
        </select>
      </div>
      <div class="filter-group search-group">
        <label for="event-search">Search</label>
        <div class="search-input-wrapper">
          <input type="text" id="event-search" class="form-control" placeholder="Search events...">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>

    <div class="table-container">
      <table class="bookings-table">
        <thead>
          <tr>
            <th>Event Name</th>
            <th>Date</th>
            <th>Time</th>
            <th>Location</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="events-table-body">
          <!-- Event bookings will be loaded here -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Rooms Tab Content -->
  <div id="rooms-tab" class="tab-content">
    <div class="filters">
      <div class="filter-group">
        <label for="room-status-filter">Status</label>
        <select id="room-status-filter" class="form-control">
          <option value="all">All Status</option>
          <option value="upcoming">Upcoming</option>
          <option value="completed">Completed</option>
          <option value="cancelled">Cancelled</option>
        </select>
      </div>
      <div class="filter-group search-group">
        <label for="room-search">Search</label>
        <div class="search-input-wrapper">
          <input type="text" id="room-search" class="form-control" placeholder="Search rooms...">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>

    <div class="table-container">
      <table class="bookings-table">
        <thead>
          <tr>
            <th>Room Number</th>
            <th>Date</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="rooms-table-body">
          <!-- Room bookings will be loaded here -->
        </tbody>
      </table>
    </div>
  </div>

  <div id="no-bookings-message" class="no-data-message" style="display: none;">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <p>No bookings found</p>
    <button onclick="loadPage('events.html')" class="btn btn-primary">Browse Events</button>
  </div>

  <div id="loading-spinner" class="loading-spinner">
    <div class="spinner"></div>
  </div>
</div>

<style>
.page-header {
  margin-bottom: 20px;
}

.btn-back {
  margin-bottom: 15px;
  padding: 8px 16px;
  background: none;
  border: none;
  color: var(--text-primary);
  cursor: pointer;
  font-size: 1rem;
}

.btn-back:hover {
  color: var(--accent-primary);
}

.bookings-container {
  padding: 20px;
}

.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 10px;
}

.tab-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  border: none;
  background: none;
  cursor: pointer;
  font-size: 1rem;
  color: var(--text-secondary);
  border-bottom: 2px solid transparent;
  transition: all 0.3s;
}

.tab-btn svg {
  opacity: 0.7;
  transition: opacity 0.3s;
}

.tab-btn:hover svg {
  opacity: 1;
}

.tab-btn.active {
  color: var(--accent-primary);
  border-bottom: 2px solid var(--accent-primary);
}

.tab-btn.active svg {
  opacity: 1;
  stroke: var(--accent-primary);
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

.filters {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  align-items: flex-end;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.filter-group label {
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.search-group {
  flex: 1;
}

.search-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.search-input-wrapper input {
  padding-right: 40px;
}

.search-icon {
  position: absolute;
  right: 12px;
  color: var(--text-secondary);
  opacity: 0.5;
}

.table-container {
  background: var(--surface);
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow-x: auto;
}

.bookings-table {
  width: 100%;
  border-collapse: collapse;
}

.bookings-table th,
.bookings-table td {
  padding: 12px 15px;
  text-align: left;
  border-bottom: 1px solid var(--border);
}

.bookings-table th {
  background-color: var(--surface-variant);
  font-weight: 600;
  white-space: nowrap;
}

.bookings-table tr:last-child td {
  border-bottom: none;
}

.status-badge {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.875rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.status-badge::before {
  content: '';
  display: block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.status-upcoming {
  background-color: var(--info-bg);
  color: var(--info);
}

.status-upcoming::before {
  background-color: var(--info);
}

.status-completed {
  background-color: var(--success-bg);
  color: var(--success);
}

.status-completed::before {
  background-color: var(--success);
}

.status-cancelled {
  background-color: var(--error-bg);
  color: var(--error);
}

.status-cancelled::before {
  background-color: var(--error);
}

.btn-cancel {
  padding: 6px 12px;
  background-color: transparent;
  color: var(--error);
  border: 1px solid var(--error);
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s;
}

.btn-cancel:hover {
  background-color: var(--error);
  color: white;
}

.loading-spinner {
  display: none;
  justify-content: center;
  padding: 40px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--surface-variant);
  border-top: 3px solid var(--accent-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.no-data-message {
  text-align: center;
  padding: 40px;
  color: var(--text-secondary);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.no-data-message svg {
  color: var(--text-secondary);
  opacity: 0.5;
}

.no-data-message .btn-primary {
  margin-top: 8px;
  padding: 8px 16px;
  background-color: var(--accent-primary);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: background-color 0.2s;
}

.no-data-message .btn-primary:hover {
  background-color: var(--accent-primary-dark);
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@media (max-width: 768px) {
  .filters {
    flex-direction: column;
    gap: 16px;
  }

  .filter-group {
    width: 100%;
  }

  .bookings-table {
    font-size: 0.875rem;
  }

  .status-badge {
    padding: 4px 8px;
  }
}
</style>

<script src="../js/my_bookings.js"></script> 