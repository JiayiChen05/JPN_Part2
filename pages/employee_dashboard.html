<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Employee Dashboard - Public Affirmation Library</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/theme-toggle.css" />
  <link rel="stylesheet" href="../css/employee_dashboard.css" />
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="logo">
        <h1>Public Affirmation Library</h1>
      </div>
      <div class="nav-buttons">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM12 21.75a.75.75 0 01-.75-.75v-2.25a.75.75 0 011.5 0V21a.75.75 0 01-.75.75zM3 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H3.75A.75.75 0 013 12zM21 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5h2.25A.75.75 0 0121 12z"/>
          </svg>
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"/>
          </svg>
        </button>
        <div class="dropdown">
          <button class="btn dropdown-toggle" id="user-button">👤 Employee</button>
          <div class="dropdown-content">
            <a href="#" onclick="loadPage('employee_profile.html')">👤 Profile Settings</a>
            <hr />
            <a href="#" class="sign-out" onclick="logout()">🚪 Sign Out</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="page-layout">
      <!-- 左侧菜单 -->
      <div class="side-menu">
        <div class="menu-item active" data-section="customers">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" stroke-width="1.5"/>
          </svg>
          <span>Manage Customers</span>
        </div>
        <div class="menu-item" data-section="employees">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" stroke-width="1.5"/>
          </svg>
          <span>Manage Employees</span>
        </div>
        <div class="menu-item" data-section="books">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" stroke-width="1.5"/>
          </svg>
          <span>Manage Books</span>
        </div>
        <div class="menu-item" data-section="events">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" stroke-width="1.5"/>
          </svg>
          <span>Manage Events</span>
        </div>
        <div class="menu-item" data-section="rooms">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21" stroke-width="1.5"/>
          </svg>
          <span>Manage Rooms</span>
        </div>
      </div>

      <!-- 右侧内容区域 -->
      <div class="content-area">
        <div id="content-customers" class="dashboard-section-content active">
          <!-- Customers Section -->
          <div class="dashboard-section">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" stroke-width="1.5"/>
              </svg>
              Manage Customers
            </h3>
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-value" id="total-customers">0</div>
                <div class="stat-label">Total Customers</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="active-customers">0</div>
                <div class="stat-label">Active Customers</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="new-customers">0</div>
                <div class="stat-label">New This Month</div>
              </div>
            </div>
            <div class="action-buttons">
              <button onclick="loadPage('manage_customers.html')" class="btn">Manage Customers</button>
            </div>
          </div>
        </div>

        <div id="content-employees" class="dashboard-section-content">
          <!-- Employees Section -->
          <div class="dashboard-section">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" stroke-width="1.5"/>
              </svg>
              Manage Employees
            </h3>
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-value" id="total-employees">0</div>
                <div class="stat-label">Total Employees</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="active-employees">0</div>
                <div class="stat-label">Active Employees</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="new-employees">0</div>
                <div class="stat-label">New This Month</div>
              </div>
            </div>
            <div class="action-buttons">
              <button onclick="loadPage('manage_employees.html')" class="btn">Manage Employees</button>
            </div>
          </div>
        </div>

        <!-- Books Section -->
        <div id="content-books" class="dashboard-section-content">
          <div class="dashboard-section">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" stroke-width="1.5"/>
              </svg>
              Manage Books
            </h3>
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-value" id="total-books">0</div>
                <div class="stat-label">Total Books</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="available-copies">0</div>
                <div class="stat-label">Available Copies</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="active-rentals">0</div>
                <div class="stat-label">Active Rentals</div>
              </div>
            </div>
            <div class="action-buttons">
              <button onclick="loadPage('manage_books.html')" class="btn">Manage Books</button>
              <button onclick="loadPage('manage_copies.html')" class="btn">Manage Copies</button>
              <button onclick="loadPage('check_rentals.html')" class="btn">Manage Rentals</button>
            </div>
          </div>
        </div>

        <!-- Events Section -->
        <div id="content-events" class="dashboard-section-content">
          <div class="dashboard-section">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" stroke-width="1.5"/>
              </svg>
              Manage Events
            </h3>
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-value" id="upcoming-exhibitions">0</div>
                <div class="stat-label">Exhibitions</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="active-seminars">0</div>
                <div class="stat-label">Seminars</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="total-registrations">0</div>
                <div class="stat-label">Registrations</div>
              </div>
            </div>
            <div class="action-buttons">
              <button onclick="loadPage('manage_exhibition.html')" class="btn">Manage Exhibitions</button>
              <button onclick="loadPage('manage_seminar.html')" class="btn">Manage Seminars</button>
              <button onclick="loadPage('manage_events.html')" class="btn">Manage Events</button>
            </div>
          </div>
        </div>

        <!-- Rooms Section -->
        <div id="content-rooms" class="dashboard-section-content">
          <div class="dashboard-section">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21" stroke-width="1.5"/>
              </svg>
              Manage Rooms
            </h3>
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-value" id="total-rooms">0</div>
                <div class="stat-label">Total Rooms</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="available-rooms">0</div>
                <div class="stat-label">Available</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="booked-today">0</div>
                <div class="stat-label">Booked Today</div>
              </div>
            </div>
            <div class="action-buttons">
              <button onclick="loadPage('manage_rooms.html')" class="btn">Manage Rooms</button>
              <button onclick="loadPage('room_bookings.html')" class="btn">Manage Bookings</button>
            </div>
          </div>
        </div>

        <!-- Recent Activities Section -->
        <div class="dashboard-section full-width">
          <h3>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="1.5"/>
            </svg>
            Manage Activities
          </h3>
          <div class="activity-list">
            <!-- Activities will be loaded dynamically -->
          </div>
          <div class="action-buttons">
            <button onclick="loadPage('manage_activities.html')" class="btn">Manage Activities</button>
          </div>
        </div>
      </div>
    </div>

    <style>
      .page-layout {
        display: flex;
        min-height: calc(100vh - 60px);
      }

      .side-menu {
        width: 250px;
        background: var(--surface);
        padding: 20px 0;
        border-right: 1px solid var(--border);
      }

      .menu-item {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        cursor: pointer;
        color: var(--text-primary);
        transition: all 0.3s ease;
      }

      .menu-item svg {
        width: 20px;
        height: 20px;
        margin-right: 12px;
      }

      .menu-item:hover {
        background: var(--surface-variant);
      }

      .menu-item.active {
        background: var(--accent-primary);
        color: white;
      }

      .menu-item.active svg {
        stroke: white;
      }

      .content-area {
        flex: 1;
        padding: 20px;
        background: var(--background);
      }

      .dashboard-section-content {
        display: none;
      }

      .dashboard-section-content.active {
        display: block;
      }

      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        padding: 2rem;
      }

      .dashboard-section {
        background: var(--surface);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .dashboard-section.full-width {
        grid-column: 1 / -1;
      }

      .dashboard-section h3 {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .dashboard-section h3 svg {
        width: 24px;
        height: 24px;
        stroke: var(--accent-primary);
      }

      .quick-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin: 1rem 0;
      }

      .stat-card {
        background: var(--surface-variant);
        padding: 1rem;
        border-radius: 6px;
        text-align: center;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--accent-primary);
      }

      .stat-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-top: 0.5rem;
      }

      .action-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .activity-list {
        margin-top: 1rem;
        display: grid;
        gap: 0.5rem;
      }

      .activity-item {
        padding: 1rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .activity-text {
        color: var(--text-primary);
      }

      .activity-time {
        color: var(--text-secondary);
        font-size: 0.875rem;
      }

      @media (max-width: 768px) {
        .quick-stats {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }
      }

      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background: var(--surface);
        min-width: 200px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        border-radius: 4px;
        z-index: 1;
      }

      .dropdown:hover .dropdown-content {
        display: block;
      }

      .dropdown-content a {
        color: var(--text-primary);
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .dropdown-content a:hover {
        background: var(--surface-variant);
      }

      .dropdown-content hr {
        margin: 0;
        border: none;
        border-top: 1px solid var(--border);
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const menuItems = document.querySelectorAll('.menu-item');
        
        menuItems.forEach(item => {
          item.addEventListener('click', () => {
            // 移除所有活动状态
            menuItems.forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.dashboard-section-content').forEach(
              content => content.classList.remove('active')
            );
            
            // 添加新的活动状态
            item.classList.add('active');
            const section = item.getAttribute('data-section');
            document.getElementById(`content-${section}`).classList.add('active');
          });
        });
      });
    </script>
  </main>

  <footer>
    <p>&copy; 2024 Public Affirmation Library. All rights reserved.</p>
  </footer>

  <script src="../js/theme-toggle.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize theme
      initializeTheme();

      // Set up user name in button
      const fname = localStorage.getItem('user_fname') || '';
      const lname = localStorage.getItem('user_lname') || '';
      const name = (fname + ' ' + lname).trim() || 'Employee';
      const userBtn = document.getElementById('user-button');
      if (userBtn) {
        userBtn.textContent = `👤 ${name}`;
      }

      // Load dashboard statistics
      loadDashboardStats();
    });

    function logout() {
      localStorage.clear();
      window.location.href = 'login.html';
    }

    function loadPage(url) {
      // Implementation for loading different pages
      window.location.href = url;
    }

    async function loadDashboardStats() {
      try {
        // Simulate loading stats - replace with actual API calls
        document.getElementById('total-books').textContent = '1,234';
        document.getElementById('available-copies').textContent = '890';
        document.getElementById('active-rentals').textContent = '50';
        document.getElementById('upcoming-exhibitions').textContent = '3';
        document.getElementById('active-seminars').textContent = '5';
        document.getElementById('total-registrations').textContent = '120';
        document.getElementById('total-rooms').textContent = '15';
        document.getElementById('available-rooms').textContent = '8';
        document.getElementById('booked-today').textContent = '3';

        // Load recent activities
        const activities = [
          { time: '2 minutes ago', text: 'New book copy added: "The Great Gatsby"' },
          { time: '15 minutes ago', text: 'Room #3 booked for tomorrow' },
          { time: '1 hour ago', text: 'New event registered: "Summer Reading Workshop"' },
          { time: '2 hours ago', text: 'Updated seminar schedule for next week' }
        ];

        const activityList = document.querySelector('.activity-list');
        activityList.innerHTML = activities.map(activity => `
          <div class="activity-item" style="padding: 1rem; border-bottom: 1px solid var(--border);">
            <div style="color: var(--text-primary);">${activity.text}</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.25rem;">
              ${activity.time}
            </div>
          </div>
        `).join('');

      } catch (error) {
        console.error('Error loading dashboard stats:', error);
      }
    }
  </script>
</body>
</html>
